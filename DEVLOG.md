# 乌说的开发日志

乌说将会是是一款自由，免费，易用的在线网页聊天平台。这个文件描述了
该平台的一些理念与功能。

## 哲学

乌说的开发将遵循以下的理念：
- 降低门槛：
	- 降低注册门槛。乌说不需要注册。即用即走。用户的信息只通过
	  经过加密（防止CSRF攻击）的Cookie保存。
	- 降低发言的门槛。比如：用户可以在最开始的时候自动发言。点一下按钮，就会自动说“有人在这里吗。”
	  之类的打招呼的台词。
	- 降低。。。
- 门槛是越低越好吗？不。他有底限：
	- 。。。（让我先想想）
- 让功能之间有明确的逻辑关系。逻辑关系包括：
	- 依存关系：如果不适用功能A，则无法使用功能B。
	- 。。。
- 前端的职能只有“将服务节点发来的消息表现出来”。
	- 为了安全。

所以，我不认同以下的观点：
- 发言是用户自己的事，不敢发言你他喵的就别发。
	- 的确是正论，但反正我就他喵的不认同。不爽的话就来 ```Fork``` 我啊。
- 应该做个账号注册的功能（嘛，再让我考虑一下）。
	- 这样就不够轻量了。这提高了使用门槛。
- 让前端去判断用户是否为新用户。
	- 不安全。前端是很容易被欺骗的。

## 功能

### 用户资料部分
- Cookie 检验：
	- 描述：在最开始（登陆之后）会向节点发送本机的 Cookie。节点会检验 Cookie，判断该机器是否禁用了 Cookie，
	  是否为新用户，个人页面是否完全。
	- 原因：降低注册与使用的门槛。

### 消息部分
- 自动发言：
	- 描述：在 Cookie检验完成之后，用户只能通过“戳我，打个招呼”来打招呼。点按之后，用户会自动发送消息
	  “有人在这里吗。”
	- 原因：。。。
- 自动回复招呼：
	- 描述：用户可以点击别人发出的“有人在这里吗？”。点击之后，前端会自动发送消息：“————我就在这里。”
	- 原因：。。。
- 发送图片：
	- 描述：用户只能在发送至少两条消息之后，才能发送图片。
	- 原因：“发送图片”是“发送文字”的进化功能。所以应该循序渐进。可以让界面更简洁：如果一开始就把那么多功能
	  摆出来，用户就会迷惘。
- 告白助攻：
	- 描述：如果节点检测到该消息中有子串“我喜欢你”或“我爱你”，系统会自动播放烟花动画。
	- 原因：不要问我原因啊我也很害羞啊。

### 房间部分
- 创建房间：
	- 描述：点一下就可以马上创建房间。让初始设置面板尽可能地简洁。
	- 原因：。。。

## 杂谈

- 因为这个项目，最近也去用了一些在线的聊天室。感觉，哎，没有那种“隐忍的温柔”啊。话说“隐忍的温柔”
  到底是什么呢？其实我也不知道啊。
- 不光要思考软件的架构，还要思考架构的迭代与演化。要牢记：软件是长出来的。
- 在那之前，要先考虑功能。没有想要实现的功能的话，一切都是空谈。
- 开线程来监听消息。不要害怕效率。Go 里的线程廉价到不行。
- 能用切片就用切片（线性表？不存在的）。必用堆时才用堆。
- 说好的绝不重写……没办法了。还是重写起来比较快。（四月十五日）
